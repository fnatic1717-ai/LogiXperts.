<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>Logixperts - Driver Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --card: #111827;
      --accent: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 24px;
    }

    .app {
      max-width: 900px;
      width: 100%;
      background: #020617;
      border-radius: 32px;
      border: 1px solid #1f2937;
      padding: 22px 20px 20px;
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      padding: 10px 14px 8px;
      border-radius: 26px;
      background: radial-gradient(circle at left top, #22c55e20, #020617 55%);
      border: 1px solid #1f2937;
    }

    .brand { display: flex; align-items: center; gap: 12px; }

    .badge-logo {
      width: 40px; height: 40px;
      border-radius: 16px;
      border: 1px solid #16a34a;
      background: radial-gradient(circle at 30% 30%, #22c55e, #16a34a);
      display: flex; align-items: center; justify-content: center;
      color: #ecfdf5; font-weight: 800; font-size: 18px;
      box-shadow: 0 10px 25px rgba(34,197,94,.55);
    }

    .brand-text h1 {
      font-size: 18px; font-weight: 800;
      letter-spacing: .06em; text-transform: uppercase;
    }

    .brand-text span {
      display:block; font-size:11px; color:var(--muted);
      text-transform:uppercase; letter-spacing:.12em; margin-top:1px;
    }

    .header-right {
      display:flex;
      align-items:center;
      gap:8px;
    }

    .tag-pill {
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background:#020617b3;
      font-size:11px;
      color:var(--muted);
      white-space:nowrap;
    }

    .lang-switch {
      display:inline-flex;
      border-radius:999px;
      border:1px solid #1f2937;
      overflow:hidden;
      background:#020617;
    }

    .lang-btn {
      padding:4px 10px;
      font-size:11px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      min-width:36px;
    }

    .lang-btn.active {
      background:var(--accent);
      color:#022c22;
      font-weight:600;
    }

    main { margin-top: 4px; }

    .view { display: none; animation: fade .2s ease-out; }
    .view.active { display: block; }

    @keyframes fade {
      from { opacity:0; transform:translateY(3px); }
      to   { opacity:1; transform:translateY(0); }
    }

    .card {
      background: var(--card);
      border-radius: 22px;
      border: 1px solid var(--border);
      padding: 18px;
      box-shadow: 0 8px 24px rgba(0,0,0,.45);
      margin-bottom: 10px;
    }

    .card-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:12px;
    }

    .card-title { font-size:17px; font-weight:600; }
    .card-sub   { font-size:13px; color:var(--muted); }

    .btn {
      border:none;
      padding:9px 14px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
      font-weight:600;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
    }

    .btn-primary {
      background:linear-gradient(to right,#16a34a,#22c55e);
      color:#ecfdf5;
      box-shadow:0 10px 20px rgba(34,197,94,.45);
    }

    .btn-secondary {
      background:#020617;
      border:1px solid #374151;
      color:#e5e7eb;
    }

    .btn-ghost {
      background:transparent;
      border:1px solid #374151;
      color:#9ca3af;
    }

    .btn-sm {
      padding:6px 10px;
      font-size:11px;
    }

    .landing-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
      gap:16px;
      margin-top:10px;
    }

    .option-card {
      border-radius:18px;
      border:1px solid #1f2937;
      background:#020617;
      padding:18px 16px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      gap:10px;
      min-height:150px; /* ÿπÿ¥ÿßŸÜ ŸÖÿß ÿ™ŸÉŸàŸÜ ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© */
    }

    .option-title { font-size:15px; font-weight:600; }

    .option-card .btn {
      width:100%;
      margin-top:4px;
    }

    .form-grid {
      display:grid;
      gap:8px;
      margin-top:6px;
    }

    label {
      font-size:12px;
      color:var(--muted);
      margin-bottom:2px;
    }

    .field {
      display:flex;
      flex-direction:column;
      gap:3px;
    }

    input {
      padding:8px 9px;
      border-radius:10px;
      border:1px solid #374151;
      background:#020617;
      color:var(--text);
      font-size:13px;
    }
    input:focus {
      border-color:#22c55e;
      outline:none;
    }

    .hint {
      font-size:11px;
      color:var(--muted);
      margin-top:4px;
    }
    .hint-error {
      color:#fecaca;
    }

    .two-column {
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,0.9fr);
      gap:12px;
    }

    @media (max-width: 768px) {
      body { padding: 16px; }
      .two-column {
        grid-template-columns:minmax(0,1fr);
      }
    }

    .status-pill {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 9px;
      border-radius:999px;
      font-size:11px;
    }
    .status-ok {
      background:#052e16;
      border:1px solid #16a34a;
      color:#bbf7d0;
    }
    .status-warn {
      background:#451a03;
      border:1px solid #f97316;
      color:#fed7aa;
    }

    .timeline {
      margin-top:6px;
      font-size:12px;
      color:var(--muted);
    }
    .timeline-item {
      padding:5px 0;
      border-bottom:1px solid #111827;
    }
    .timeline-item:last-child {
      border-bottom:none;
    }
    .timeline-label {
      font-size:12px;
      color:#e5e7eb;
      margin-bottom:1px;
    }

    footer {
      margin-top: 8px;
      font-size: 11px;
      color: #9ca3af;
      text-align: center;
    }

    .support-box {
      margin-bottom: 10px;
      font-size: 12px;
      line-height: 1.6;
      color: #d1d5db;
    }

    .support-box h3 {
      font-size: 13px;
      margin-bottom: 4px;
      color: #22c55e;
      font-weight: 700;
    }

    .footer-brand {
      font-size: 10px;
      color: #4b5563;
    }
    .footer-brand span {
      color: #a7f3d0;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="badge-logo">Lx</div>
        <div class="brand-text">
          <h1>Logixperts</h1>
          <span data-i18n="header.subtitle">Smart Load ‚Äì Driver Portal</span>
        </div>
      </div>

      <div class="header-right">
        <span class="tag-pill" data-i18n="header.tag">
          Driver &amp; Admin Access
        </span>
        <div class="lang-switch">
          <button class="lang-btn active" id="btnLangEn" onclick="setLanguage('en')">EN</button>
          <button class="lang-btn" id="btnLangAr" onclick="setLanguage('ar')">ÿπÿ±ÿ®Ÿä</button>
        </div>
      </div>
    </header>

    <main>
      <!-- VIEW 1: LANDING SCREEN -->
      <section id="view-landing" class="view active">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title" data-i18n="landing.title">
                Who is using this portal?
              </div>
              <div class="card-sub" data-i18n="landing.subtitle">
                Choose your role to continue.
              </div>
            </div>
          </div>

          <div class="landing-grid">
            <!-- Admin option -->
            <div class="option-card">
              <div class="option-title" data-i18n="landing.adminTitle">
                I am an Admin
              </div>
              <button class="btn btn-secondary"
                onclick="goToAdmin()"
                data-i18n="landing.adminButton">
                Go to Admin Platform
              </button>
            </div>

            <!-- Driver option -->
            <div class="option-card">
              <div class="option-title" data-i18n="landing.driverTitle">
                I am a Driver
              </div>
              <button class="btn btn-primary"
                onclick="switchView('view-driver-login')"
                data-i18n="landing.driverButton">
                Continue as Driver
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- VIEW 2: DRIVER LOGIN -->
      <section id="view-driver-login" class="view">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title" data-i18n="driverLogin.title">
                Driver Login
              </div>
              <div class="card-sub" data-i18n="driverLogin.subtitle">
                Enter your Driver ID and Company Code.
              </div>
            </div>
            <button class="btn btn-ghost btn-sm" onclick="switchView('view-landing')" data-i18n="driverLogin.back">
              ‚¨Ö Back
            </button>
          </div>

          <form class="form-grid" onsubmit="event.preventDefault(); driverLogin();">
            <div class="field">
              <label for="driverId" data-i18n="driverLogin.driverIdLabel">Driver ID</label>
              <input id="driverId" type="text" placeholder="e.g. 1023" />
            </div>
            <div class="field">
              <label for="companyCode" data-i18n="driverLogin.companyCodeLabel">Company Code</label>
              <input id="companyCode" type="text" placeholder="e.g. LXPRT" />
            </div>
            <button class="btn btn-primary" type="submit" style="margin-top:4px;"
              data-i18n="driverLogin.button">
              Login as Driver
            </button>
            <p id="driverLoginMsg" class="hint"></p>
          </form>
        </div>
      </section>

      <!-- VIEW 3: DRIVER DASHBOARD -->
      <section id="view-driver-dashboard" class="view">
        <div class="two-column">
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title" id="driverWelcome">
                  Welcome, Driver
                </div>
                <div class="card-sub" id="driverInfo">
                  ‚Äî
                </div>
              </div>
              <button class="btn btn-ghost btn-sm" onclick="driverLogout()" data-i18n="driverDashboard.logout">
                Logout
              </button>
            </div>

            <div>
              <div class="status-pill status-ok" id="driverStatusPill">
                ‚úÖ Status: Ready for assignment
              </div>

              <div style="margin-top:10px;">
                <div style="font-size:13px;font-weight:600;margin-bottom:3px;" data-i18n="driverDashboard.assignmentTitle">
                  Current Assignment
                </div>
                <div style="font-size:13px;color:var(--muted);" id="currentAssignment">
                  No active assignment yet. Please wait for dispatch instructions.
                </div>
              </div>

              <div style="margin-top:10px;">
                <button class="btn btn-secondary btn-sm" onclick="markArrived()" data-i18n="driverDashboard.markArrived">
                  Mark as Arrived at Location
                </button>
                <button class="btn btn-secondary btn-sm" onclick="markLoaded()" style="margin-inline-start:6px;"
                  data-i18n="driverDashboard.markLoaded">
                  Confirm Loading Complete
                </button>
              </div>

              <p class="hint" id="driverActionMsg"></p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title" data-i18n="driverDashboard.routeTitle">
                  Today's Route & Instructions
                </div>
                <div class="card-sub" data-i18n="driverDashboard.routeSubtitle">
                  Simple guidance from operations ‚Äî where to go and what to do.
                </div>
              </div>
            </div>

            <div class="timeline" id="driverTimeline">
              <!-- filled by JS -->
            </div>

            <p class="hint" style="margin-top:6px;" data-i18n="driverDashboard.note">
              This driver view is a simple prototype. Operations can update instructions per driver.
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="support-box">
        <h3 data-i18n="support.title">Customer Support</h3>
        <p>üìû <span data-i18n="support.phoneLabel">Phone:</span> +966 55 555 5555</p>
        <p>üìß <span data-i18n="support.emailLabel">Email:</span> support@logixperts.com</p>
        <p>üì† <span data-i18n="support.faxLabel">Fax:</span> 011-1234567</p>
      </div>

      <div class="footer-brand">
        <span>Logixperts</span> ¬∑
        <span data-i18n="footer.portal">Driver Portal</span> ¬∑
        Naqlthon 4
      </div>
    </footer>
  </div>

  <script>
    // ‚Äî‚Äî translations ‚Äî‚Äî //
    const translations = {
      en: {
        "header.subtitle": "Smart Load ‚Äì Driver Portal",
        "header.tag": "Driver & Admin Access",

        "landing.title": "Who is using this portal?",
        "landing.subtitle": "Choose your role to continue.",
        "landing.adminTitle": "I am an Admin",
        "landing.driverTitle": "I am a Driver",
        "landing.adminButton": "Go to Admin Platform",
        "landing.driverButton": "Continue as Driver",

        "driverLogin.title": "Driver Login",
        "driverLogin.subtitle": "Enter your Driver ID and Company Code.",
        "driverLogin.back": "‚¨Ö Back",
        "driverLogin.driverIdLabel": "Driver ID",
        "driverLogin.companyCodeLabel": "Company Code",
        "driverLogin.button": "Login as Driver",
        "driverLogin.errorMissing": "Please enter both Driver ID and Company Code.",
        "driverLogin.genericInfo": "Logged in as generic driver (demo).",

        "driverDashboard.logout": "Logout",
        "driverDashboard.assignmentTitle": "Current Assignment",
        "driverDashboard.statusReady": "‚úÖ Status: Ready for assignment",
        "driverDashboard.statusArrived": "üü° Status: Arrived at location, waiting for loading",
        "driverDashboard.statusLoaded": "‚úÖ Status: Loaded ‚Äì ready to depart",
        "driverDashboard.routeTitle": "Today's Route & Instructions",
        "driverDashboard.routeSubtitle": "Simple guidance from operations ‚Äî where to go and what to do.",
        "driverDashboard.markArrived": "Mark as Arrived at Location",
        "driverDashboard.markLoaded": "Confirm Loading Complete",
        "driverDashboard.note": "This driver view is a simple prototype. Operations can update instructions per driver.",
        "driverDashboard.msgArrived": "Arrival confirmed. Dispatch will see this status.",
        "driverDashboard.msgLoaded": "Loading confirmed. You are ready to depart.",

        "timeline.step1.label": "1. Go to:",
        "timeline.step1.desc": "Follow dispatch instructions for this location.",
        "timeline.step2.label": "2. Confirm arrival",
        "timeline.step2.desc": "Use \"Mark as Arrived\" when you reach the location.",
        "timeline.step3.label": "3. Confirm loading",
        "timeline.step3.desc": "Use \"Confirm Loading Complete\" after finishing loading.",

        "footer.portal": "Driver Portal",

        "driverDashboard.welcome": "Welcome, ",
        "driverDashboard.driverInfoPrefix": "Driver ID: ",
        "driverDashboard.companyInfoPrefix": " ¬∑ Company: ",
        "driverDashboard.truckPrefix": " ¬∑ Truck: ",
        "driverDashboard.noAssignment":
          "No active assignment yet. Please wait for dispatch instructions.",
        "driverDashboard.assignmentText":
          "Next location: {city}. Instructions: {note}",

        "support.title": "Customer Support",
        "support.phoneLabel": "Phone:",
        "support.emailLabel": "Email:",
        "support.faxLabel": "Fax:"
      },

      ar: {
        "header.subtitle": "Smart Load ‚Äì ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ≥ÿßÿ¶ŸÇ",
        "header.tag": "ÿØÿÆŸàŸÑ ÿßŸÑÿ•ÿØÿßÿ±Ÿä ŸàÿßŸÑÿ≥ÿßÿ¶ŸÇ",

        "landing.title": "ŸÖŸÜ Ÿäÿ≥ÿ™ÿÆÿØŸÖ Ÿáÿ∞Ÿá ÿßŸÑÿ®Ÿàÿßÿ®ÿ©ÿü",
        "landing.subtitle": "ÿßÿÆÿ™ÿ± ÿßŸÑÿØŸàÿ± ÿßŸÑŸÖŸÜÿßÿ≥ÿ® ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©.",
        "landing.adminTitle": "ÿ£ŸÜÿß ÿ•ÿØÿßÿ±Ÿä",
        "landing.driverTitle": "ÿ£ŸÜÿß ÿ≥ÿßÿ¶ŸÇ",
        "landing.adminButton": "ÿØÿÆŸàŸÑ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©",
        "landing.driverButton": "ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ŸÉÿ≥ÿßÿ¶ŸÇ",

        "driverLogin.title": "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑÿ≥ÿßÿ¶ŸÇ",
        "driverLogin.subtitle": "ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ≥ÿßÿ¶ŸÇ ŸàŸÉŸàÿØ ÿßŸÑÿ¥ÿ±ŸÉÿ©.",
        "driverLogin.back": "‚¨Ö ÿ±ÿ¨Ÿàÿπ",
        "driverLogin.driverIdLabel": "ÿ±ŸÇŸÖ ÿßŸÑÿ≥ÿßÿ¶ŸÇ",
        "driverLogin.companyCodeLabel": "ŸÉŸàÿØ ÿßŸÑÿ¥ÿ±ŸÉÿ©",
        "driverLogin.button": "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÉÿ≥ÿßÿ¶ŸÇ",
        "driverLogin.errorMissing": "ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ≥ÿßÿ¶ŸÇ ŸàŸÉŸàÿØ ÿßŸÑÿ¥ÿ±ŸÉÿ©.",
        "driverLogin.genericInfo": "ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÉÿ≥ÿßÿ¶ŸÇ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä.",

        "driverDashboard.logout": "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨",
        "driverDashboard.assignmentTitle": "ÿßŸÑÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©",
        "driverDashboard.statusReady": "‚úÖ ÿßŸÑÿ≠ÿßŸÑÿ©: ÿ¨ÿßŸáÿ≤ ŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ±ÿ≠ŸÑÿ©",
        "driverDashboard.statusArrived": "üü° ÿßŸÑÿ≠ÿßŸÑÿ©: ŸàÿµŸÑÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖŸàŸÇÿπ Ÿàÿ£ŸÜÿ™ÿ∏ÿ± ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ",
        "driverDashboard.statusLoaded": "‚úÖ ÿßŸÑÿ≠ÿßŸÑÿ©: ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ‚Äì ÿ¨ÿßŸáÿ≤ ŸÑŸÑŸÖÿ∫ÿßÿØÿ±ÿ©",
        "driverDashboard.routeTitle": "ŸÖÿ≥ÿßÿ± ÿßŸÑŸäŸàŸÖ ŸàÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™",
        "driverDashboard.routeSubtitle": "ÿ•ÿ±ÿ¥ÿßÿØÿßÿ™ ÿ®ÿ≥Ÿäÿ∑ÿ© ŸÖŸÜ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™ ‚Äî ÿ•ŸÑŸâ ÿ£ŸäŸÜ ÿ™ÿ∞Ÿáÿ® ŸàŸÖÿßÿ∞ÿß ÿ™ŸÅÿπŸÑ.",
        "driverDashboard.markArrived": "ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÖŸàŸÇÿπ",
        "driverDashboard.markLoaded": "ÿ™ÿ£ŸÉŸäÿØ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ",
        "driverDashboard.note": "Ÿáÿ∞Ÿá Ÿàÿßÿ¨Ÿáÿ© ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©ÿå ŸàŸäŸÖŸÉŸÜ ŸÑŸÑÿ•ÿØÿßÿ±ÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™ ŸÑŸÉŸÑ ÿ≥ÿßÿ¶ŸÇ.",
        "driverDashboard.msgArrived": "ÿ™ŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸàÿµŸàŸÑÿå ÿ≥Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ≠ÿßŸÑÿ© ŸÑŸÇÿ≥ŸÖ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™.",
        "driverDashboard.msgLoaded": "ÿ™ŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑÿå ŸäŸÖŸÉŸÜŸÉ ÿßŸÑŸÖÿ∫ÿßÿØÿ±ÿ© ÿßŸÑÿ¢ŸÜ.",

        "timeline.step1.label": "1. ÿßŸÑÿ™Ÿàÿ¨ŸëŸá ÿ•ŸÑŸâ:",
        "timeline.step1.desc": "ÿßÿ™ÿ®ÿπ ÿ™ÿπŸÑŸäŸÖÿßÿ™ ŸÇÿ≥ŸÖ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™ ŸÑŸáÿ∞ÿß ÿßŸÑŸÖŸàŸÇÿπ.",
        "timeline.step2.label": "2. ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸàÿµŸàŸÑ",
        "timeline.step2.desc": "ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± \"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸàÿµŸàŸÑ\" ÿπŸÜÿØ ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÖŸàŸÇÿπ.",
        "timeline.step3.label": "3. ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ",
        "timeline.step3.desc": "ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± \"ÿ™ÿ£ŸÉŸäÿØ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ\" ÿ®ÿπÿØ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°.",

        "footer.portal": "ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ≥ÿßÿ¶ŸÇ",

        "driverDashboard.welcome": "ŸÖÿ±ÿ≠ÿ®Ÿãÿßÿå ",
        "driverDashboard.driverInfoPrefix": "ÿ±ŸÇŸÖ ÿßŸÑÿ≥ÿßÿ¶ŸÇ: ",
        "driverDashboard.companyInfoPrefix": " ¬∑ ÿßŸÑÿ¥ÿ±ŸÉÿ©: ",
        "driverDashboard.truckPrefix": " ¬∑ ÿßŸÑÿ¥ÿßÿ≠ŸÜÿ©: ",
        "driverDashboard.noAssignment":
          "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ±ÿ≠ŸÑÿ© ŸÖŸÅÿπŸëŸÑÿ© ÿ≠ÿßŸÑŸäŸãÿßÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™Ÿàÿ¨ŸäŸáÿßÿ™ ŸÇÿ≥ŸÖ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™.",
        "driverDashboard.assignmentText":
          "ÿßŸÑŸàÿ¨Ÿáÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©: {city}. ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™: {note}",

        "support.title": "ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°",
        "support.phoneLabel": "ÿßŸÑŸáÿßÿ™ŸÅ:",
        "support.emailLabel": "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:",
        "support.faxLabel": "ÿßŸÑŸÅÿßŸÉÿ≥:"
      }
    };

    // demo drivers
    const demoDrivers = [
      {
        driverId: "1023",
        companyCode: "LXPRT",
        name: "Ahmed",
        truck: "TRK-12",
        nextCity: "Riyadh DC",
        note: "Pickup return load to Jeddah before 16:00."
      },
      {
        driverId: "2045",
        companyCode: "LXPRT",
        name: "Omar",
        truck: "TRK-21",
        nextCity: "Dammam Hub",
        note: "Proceed empty to Dammam hub, wait for backhaul load."
      }
    ];

    let currentDriver = null;
    let currentLang = "en";

    function setLanguage(lang) {
      currentLang = lang;

      document.documentElement.lang = lang;
      document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";

      // toggle buttons
      document.getElementById("btnLangEn").classList.toggle("active", lang === "en");
      document.getElementById("btnLangAr").classList.toggle("active", lang === "ar");

      // static text
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        const text = translations[lang][key];
        if (text !== undefined) el.textContent = text;
      });

      // placeholders
      document.getElementById("driverId").placeholder =
        lang === "en" ? "e.g. 1023" : "ŸÖÿ´ÿßŸÑ: 1023";
      document.getElementById("companyCode").placeholder =
        lang === "en" ? "e.g. LXPRT" : "ŸÖÿ´ÿßŸÑ: LXPRT";

      // refresh dashboard text (if logged in)
      if (currentDriver) {
        fillDriverDashboard(currentDriver);
      } else {
        updateTimelineFor(null);
      }
    }

    function switchView(id) {
      document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
      const target = document.getElementById(id);
      if (target) target.classList.add("active");
    }

    function goToAdmin() {
      // ÿ±ÿßÿ®ÿ∑ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©
      window.location.href = "admin.html";
      // ÿ£Ÿà ŸÑŸà ÿπŸÜÿØŸÉ ÿ±ÿßÿ®ÿ∑ GitHub Pages:
      // window.location.href = "https://rahmone95.github.io/LogiXperts-/";
    }

    function driverLogin() {
      const id = document.getElementById("driverId").value.trim();
      const company = document.getElementById("companyCode").value.trim().toUpperCase();
      const msg = document.getElementById("driverLoginMsg");

      if (!id || !company) {
        msg.textContent = translations[currentLang]["driverLogin.errorMissing"];
        msg.classList.add("hint-error");
        return;
      }

      msg.classList.remove("hint-error");

      const found = demoDrivers.find(d => d.driverId === id && d.companyCode === company);

      if (found) {
        currentDriver = found;
        msg.textContent = "";
        fillDriverDashboard(found);
        switchView("view-driver-dashboard");
      } else {
        currentDriver = {
          driverId: id,
          companyCode: company,
          name: (currentLang === "ar" ? "ÿßŸÑÿ≥ÿßÿ¶ŸÇ " : "Driver ") + id,
          truck: "‚Äî",
          nextCity: currentLang === "ar" ? "ÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿØ ŸÑÿßÿ≠ŸÇŸãÿß" : "To be assigned",
          note:
            currentLang === "ar"
              ? "Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ŸÇÿ≥ŸÖ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™ ŸÑŸÖÿπÿ±ŸÅÿ© ÿßŸÑÿ±ÿ≠ŸÑÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©."
              : "Please contact dispatch for your next assignment."
        };
        msg.textContent = translations[currentLang]["driverLogin.genericInfo"];
        fillDriverDashboard(currentDriver);
        switchView("view-driver-dashboard");
      }
    }

    function fillDriverDashboard(driver) {
      const t = translations[currentLang];
      const welcome = document.getElementById("driverWelcome");
      const info = document.getElementById("driverInfo");
      const assignment = document.getElementById("currentAssignment");
      const statusPill = document.getElementById("driverStatusPill");
      const actionMsg = document.getElementById("driverActionMsg");

      welcome.textContent = t["driverDashboard.welcome"] + driver.name;
      let text =
        t["driverDashboard.driverInfoPrefix"] +
        driver.driverId +
        t["driverDashboard.companyInfoPrefix"] +
        driver.companyCode;

      if (driver.truck && driver.truck !== "‚Äî") {
        text += t["driverDashboard.truckPrefix"] + driver.truck;
      }
      info.textContent = text;

      statusPill.textContent = t["driverDashboard.statusReady"];
      statusPill.className = "status-pill status-ok";

      if (!driver.nextCity || !driver.note) {
        assignment.textContent = t["driverDashboard.noAssignment"];
      } else {
        assignment.textContent = t["driverDashboard.assignmentText"]
          .replace("{city}", driver.nextCity)
          .replace("{note}", driver.note);
      }

      updateTimelineFor(driver);
      actionMsg.textContent = "";
    }

    function updateTimelineFor(driver) {
      const t = translations[currentLang];
      const timeline = document.getElementById("driverTimeline");
      const city =
        driver && driver.nextCity
          ? driver.nextCity
          : (currentLang === "ar" ? "ÿßŸÑŸàÿ¨Ÿáÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©" : "Next stop");

      timeline.innerHTML = `
        <div class="timeline-item">
          <div class="timeline-label">${t["timeline.step1.label"]} ${city}</div>
          <div>${t["timeline.step1.desc"]}</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-label">${t["timeline.step2.label"]}</div>
          <div>${t["timeline.step2.desc"]}</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-label">${t["timeline.step3.label"]}</div>
          <div>${t["timeline.step3.desc"]}</div>
        </div>
      `;
    }

    function markArrived() {
      if (!currentDriver) return;
      const t = translations[currentLang];
      const statusPill = document.getElementById("driverStatusPill");
      const actionMsg = document.getElementById("driverActionMsg");

      statusPill.textContent = t["driverDashboard.statusArrived"];
      statusPill.className = "status-pill status-warn";

      actionMsg.textContent = t["driverDashboard.msgArrived"];
    }

    function markLoaded() {
      if (!currentDriver) return;
      const t = translations[currentLang];
      const statusPill = document.getElementById("driverStatusPill");
      const actionMsg = document.getElementById("driverActionMsg");

      statusPill.textContent = t["driverDashboard.statusLoaded"];
      statusPill.className = "status-pill status-ok";

      actionMsg.textContent = t["driverDashboard.msgLoaded"];
    }

    function driverLogout() {
      currentDriver = null;
      document.getElementById("driverId").value = "";
      document.getElementById("companyCode").value = "";
      document.getElementById("driverLoginMsg").textContent = "";
      switchView("view-driver-login");
    }

    // init
    setLanguage("en");
  </script>
</body>
</html>
